# MTs Negeri 1 Pandeglang

Portal resmi **Madrasah Tsanawiyah Negeri 1 Pandeglang** yang dibangun dengan arsitektur **Hybrid (Modern SSG + Lightweight Backend)**. Platform ini mengintegrasikan kecepatan website statis dengan fleksibilitas sistem manajemen konten dan data yang dinamis.

## Deskripsi Proyek

Website ini bukan sekadar profil sekolah, melainkan ekosistem digital yang mencakup:

1.  **Front-end Super Cepat:** Dibangun dengan Astro untuk performa maksimal bagi pengunjung.
2.  **Admin Dashboard Terintegrasi:** Sistem manajemen internal untuk memantau trafik, mengelola artikel, dan menganalisis survei kepuasan masyarakat.
3.  **Layanan Digital:** Pelayanan Terpadu Satu Pintu (PTSP) digital, survei kepuasan pelanggan, dan kotak saran.

**Moto:** _Mandiri, Takwa, Peduli Lingkungan, Prestasi_

---

## Teknologi Utama

### Frontend (High Performance)

- **Astro 5.16.6** - Islands Architecture untuk performa optimal.
- **React 19.2.0** - Komponen interaktif (Admin Dashboard, Survey Wizard).
- **TailwindCSS 4.1.14** - Utility-first CSS framework.
- **TypeScript** - Type-safe development.
- **Vite PWA** - Dukungan Progressive Web App (Offline ready).

### Backend & Data (Lightweight & Portable)

- **PHP 8.x** - API endpoint (Native) untuk logika server-side.
- **SQLite3** - Database berbasis file yang ringan, cepat, dan mudah di-backup.
- **Chart.js** - Visualisasi data statistik dan survei.
- **FPDF** - Generate laporan PDF otomatis.

---

## Fitur Unggulan

### Portal Publik

- **Profil & Akademik:** Visi misi, sejarah, kurikulum, dan program unggulan.
- **Blog & Berita:** Artikel dengan kategori, tag, dan estimasi waktu baca.
- **Galeri Digital:** Integrasi foto dan video kegiatan siswa.
- **PWA Support:** Dapat diinstal di HP/Desktop layaknya aplikasi native.
- **Dark Mode:** Dukungan tema gelap otomatis/manual.
- **SEO & Performa:** Skor Lighthouse 97-100.

### Admin Dashboard (New)

Panel admin aman yang dilindungi login **Google OAuth** dengan fitur:

- **Ringkasan Real-time:** Grafik kunjungan bulanan, tren aktivitas, dan rating bintang.
- **Manajemen Artikel:** Upload artikel `.mdx`, gambar, dan video langsung dari dashboard.
- **Analisis Survei (6 Indikator):**
  1. Zona Integritas (ZI)
  2. Pelayanan PTSP
  3. Akademik
  4. Sarana & Prasarana
  5. Manajemen
  6. Budaya & Iklim Sekolah
- **Riwayat Kunjungan:** Log detail IP address, browser/device, dan waktu akses.
- **Feedback Manager:** Moderasi ulasan dan kritik saran masuk.
- **Export Data:** Unduh laporan dalam format **Excel (CSV)** dan **PDF**.
- **User Management:** Kelola hak akses (Super Admin, Operator, User).

---

## Struktur Direktori

```tree
â”œâ”€â”€ public/                 # Static assets & Backend API
â”‚   â”œâ”€â”€ api/               # PHP Endpoints (Auth, Stats, Content, etc.)
â”‚   â”œâ”€â”€ images/            # Image assets
â”‚   â”œâ”€â”€ videos/            # Video assets
â”‚   â””â”€â”€ database.db        # SQLite Database (Auto-generated)
â”œâ”€â”€ scripts/               # Build scripts
â”‚   â””â”€â”€ jsonGenerator.js   # Content JSON generator for Search
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/            # Site configuration (Menu, Theme, SEO)
â”‚   â”œâ”€â”€ content/           # MDX Collections (Blog, Pages, Sections)
â”‚   â”œâ”€â”€ layouts/           # Layouts & Components
â”‚   â”‚   â”œâ”€â”€ helpers/       # React Widgets (AdminDashboard, SurveyWizard)
â”‚   â”‚   â”œâ”€â”€ partials/      # Header, Footer, Sidebar
â”‚   â”‚   â””â”€â”€ shortcodes/    # MDX widgets (Video, Youtube, Tabs)
â”‚   â”œâ”€â”€ pages/             # Astro Routes
â”‚   â””â”€â”€ styles/            # Global CSS
â””â”€â”€ deploy.sh              # Auto Deployment Script
```

---

## Instalasi & Setup

### Prasyarat

1.  **Node.js** (v18+) & **Yarn**.
2.  **PHP** (v8.0+) dengan ekstensi `sqlite3` dan `mbstring` aktif.
3.  **Web Server** (Apache/Nginx) atau PHP built-in server untuk menjalankan API backend.

### Langkah-Langkah

1.  **Clone Repository**

    ```bash
    git clone https://github.com/zulfikriyahya/mtsn1pandeglang.git
    cd mtsn1pandeglang
    ```

2.  **Install Dependencies Frontend**

    ```bash
    yarn install
    ```

3.  **Konfigurasi Environment**
    Buat file `.env` di root project:

    ```env
    PUBLIC_GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
    ADMIN_EMAIL=email-super-admin@gmail.com
    ```

4.  **Generate Data Awal**

    ```bash
    yarn generate-json
    ```

5.  **Jalankan Development Server**
    - **Terminal 1 (Frontend Astro):**
      ```bash
      yarn dev
      ```
    - **Terminal 2 (Backend PHP - opsional jika dev lokal):**
      ```bash
      cd public
      php -S localhost:8000
      ```

    _Catatan: Untuk fitur dashboard berfungsi penuh di lokal, pastikan proxy di konfigurasi Astro mengarah ke server PHP, atau jalankan di lingkungan seperti XAMPP/Laragon._

---

## ğŸ›  Perintah Tersedia

| Perintah             | Deskripsi                                          |
| :------------------- | :------------------------------------------------- |
| `yarn dev`           | Menjalankan server pengembangan Astro.             |
| `yarn build`         | Membuild aset statis ke folder `dist/`.            |
| `yarn preview`       | Meninjau hasil build produksi.                     |
| `yarn generate-json` | Membuat index pencarian JSON dari konten Markdown. |
| `yarn format`        | Merapikan kode menggunakan Prettier.               |

---

## Deployment (Production)

Karena menggunakan **Hybrid Stack (Static HTML + PHP API)**, disarankan menggunakan **VPS** (Virtual Private Server) atau **Shared Hosting** (cPanel/AAPanel).

### Menggunakan Script Auto-Deploy (VPS)

Proyek ini dilengkapi script `deploy.sh` untuk otomatisasi di server Linux (Ubuntu/Debian).

1.  Upload kode ke server `/var/www/mtsn1pandeglang.sch.id`.
2.  Set permission file eksekusi:
    ```bash
    chmod +x deploy.sh
    chmod +x rebuild.sh
    ```
3.  Pastikan user web server (`www-data`) memiliki akses tulis ke folder `public/` dan file `database.db`.
    ```bash
    chown -R www-data:www-data /var/www/mtsn1pandeglang.sch.id
    chmod 775 -R /var/www/mtsn1pandeglang.sch.id/public
    ```

---

## Keamanan

- **Google OAuth 2.0:** Autentikasi admin menggunakan akun Google, mencegah brute-force password.
- **Role Based Access Control (RBAC):** Pemisahan hak akses antara Super Admin (Full), Operator (Edit), dan User (View).
- **SQLite Wal Mode:** Menjamin integritas data transaksi database.
- **Sanitasi Input:** Semua input form dan upload file divalidasi di sisi server (PHP).

---

## Kontribusi

Proyek ini dikembangkan dan dikelola oleh **Tim Pusdatin MTsN 1 Pandeglang**.

### Developer Utama

**Yahya Zulfikri**

- **Role:** Lead Developer & System Architect
- **GitHub:** [@zulfikriyahya](https://github.com/zulfikriyahya)
- **Email:** dev@mtsn1pandeglang.sch.id

---

## Lisensi

Copyright Â© 2022-2026 **Madrasah Tsanawiyah Negeri 1 Pandeglang**.
All Rights Reserved.

---

_Built with â¤ï¸ for Education._
