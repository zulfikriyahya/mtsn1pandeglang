---
import { humanize, slugify } from "@/lib/utils/textConverter";

const { tags, categories, allCategories } = Astro.props;
---

<div class="lg:col-4 mt-12 lg:mt-0">
  <!-- Sambutan Kepala Sekolah (Bisa dibuat dinamis juga via Directus Singleton jika mau) -->
  <div class="mb-8 gsap-fade-up">
    <div class="rounded bg-light p-8 dark:bg-darkmode-light shadow-sm">
      <div class="text-center mb-4">
        <img
          src="/images/assets/kepala-madrasah.png"
          alt="Kepala Madrasah"
          class="rounded-full w-24 h-24 mx-auto mb-4 object-cover border-4 border-white shadow-md"
        />
        <h5 class="mb-1">H. Eman Sulaiman, S.Ag., M.Pd.</h5>
        <p class="text-sm text-text-light dark:text-darkmode-text-light">
          Kepala Madrasah
        </p>
      </div>
      <p class="text-justify text-sm mb-4">
        Selamat datang di website resmi MTs Negeri 1 Pandeglang. Website ini
        merupakan sarana informasi dan komunikasi bagi seluruh civitas akademika
        dan masyarakat luas.
      </p>
    </div>
  </div>

  <!-- Categories -->
  <div class="mb-8 gsap-fade-up">
    <h5
      class="mb-6 relative inline-block pl-3 after:absolute after:left-0 after:top-0 after:h-full after:w-1 after:bg-primary after:content-['']"
    >
      Kategori
    </h5>
    <div class="rounded bg-light p-8 dark:bg-darkmode-light shadow-sm">
      <ul class="space-y-4">
        {
          categories.map((category: any) => {
            const count = allCategories.filter(
              (c: any) => c === category,
            ).length;
            return (
              <li>
                <a
                  class="flex justify-between hover:text-primary dark:hover:text-darkmode-primary transition-colors"
                  href={`/categories/${slugify(category)}`}
                >
                  {humanize(category)}{" "}
                  <span class="bg-white dark:bg-darkmode-body px-2 rounded-full text-xs py-0.5 shadow-sm">
                    {count}
                  </span>
                </a>
              </li>
            );
          })
        }
      </ul>
    </div>
  </div>

  <!-- Tags -->
  <div class="mb-8 gsap-fade-up">
    <h5
      class="mb-6 relative inline-block pl-3 after:absolute after:left-0 after:top-0 after:h-full after:w-1 after:bg-primary after:content-['']"
    >
      Tagar Populer
    </h5>
    <div class="rounded bg-light p-6 dark:bg-darkmode-light shadow-sm">
      <ul class="flex flex-wrap gap-2">
        {
          tags.map((tag: any) => (
            <li class="inline-block">
              <a
                class="block rounded bg-white px-3 py-1 text-sm hover:bg-primary hover:text-white dark:bg-darkmode-body dark:hover:bg-darkmode-primary dark:hover:text-text-dark transition-all shadow-sm"
                href={`/tags/${slugify(tag)}`}
              >
                #{humanize(tag)}
              </a>
            </li>
          ))
        }
      </ul>
    </div>
  </div>
</div>
