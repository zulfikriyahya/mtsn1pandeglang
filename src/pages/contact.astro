---
import Base from "@/layouts/Base.astro";
import PageHeader from "@/partials/PageHeader.astro";
import { getSiteSettings } from "@/lib/directus";
import { markdownify } from "@/lib/utils/textConverter";
import {
  IoLocationOutline,
  IoCallOutline,
  IoMailOutline,
} from "react-icons/io5";

const settings = await getSiteSettings();
const { contact_address, contact_email, contact_phone, google_map_embed } =
  settings || {};
const pageTitle = "Hubungi Kami";
---

<Base
  title={pageTitle}
  meta_title={pageTitle}
  description="Halaman kontak sekolah"
>
  <PageHeader title={pageTitle} />
  <section class="section-sm">
    <div class="container">
      <div class="row">
        <div class="md:col-5 lg:col-4 mb-10 md:mb-0 gsap-fade-up">
          <h2 class="h4 mb-6">Informasi Kontak</h2>
          <ul class="pl-0">
            <li class="flex items-start mb-6">
              <div class="text-primary text-2xl mr-4 mt-1">
                <IoLocationOutline />
              </div>
              <div>
                <h3 class="h6 mb-2">Alamat</h3>
                <p
                  set:html={markdownify(
                    contact_address || "Alamat belum diatur",
                  )}
                />
              </div>
            </li>
            <li class="flex items-start mb-6">
              <div class="text-primary text-2xl mr-4 mt-1">
                <IoMailOutline />
              </div>
              <div>
                <h3 class="h6 mb-2">Email</h3>
                <a href={`mailto:${contact_email}`} class="hover:text-primary"
                  >{contact_email || "dev@mtsn1pandeglang.sch.id"}</a
                >
              </div>
            </li>
            <li class="flex items-start mb-6">
              <div class="text-primary text-2xl mr-4 mt-1">
                <IoCallOutline />
              </div>
              <div>
                <h3 class="h6 mb-2">Telepon</h3>
                <a href={`tel:${contact_phone}`} class="hover:text-primary"
                  >{contact_phone || "Hubungi Kami"}</a
                >
              </div>
            </li>
          </ul>
        </div>
        <div class="md:col-7 lg:col-8 gsap-fade-up">
          <h2 class="h4 mb-6">Kirim Pesan</h2>
          <form class="contact-form" method="POST">
            <div class="mb-6">
              <label class="mb-2 block font-secondary" for="name"
                >Nama Lengkap <small class="text-red-500">*</small></label
              >
              <input
                class="form-input w-full"
                name="name"
                type="text"
                placeholder="Nama Anda"
                required
              />
            </div>
            <div class="mb-6">
              <label class="mb-2 block font-secondary" for="email"
                >Email <small class="text-red-500">*</small></label
              >
              <input
                class="form-input w-full"
                name="email"
                type="email"
                placeholder="email@contoh.com"
                required
              />
            </div>
            <div class="mb-6">
              <label class="mb-2 block font-secondary" for="message"
                >Pesan <small class="text-red-500">*</small></label
              >
              <textarea
                class="form-textarea w-full"
                name="message"
                rows="5"
                placeholder="Tulis pesan Anda di sini..."
                required></textarea>
            </div>
            <button class="btn btn-primary" type="submit">Kirim Pesan</button>
          </form>
        </div>
      </div>
      {
        google_map_embed && (
          <div class="row mt-16 gsap-fade-up">
            <div class="col-12">
              <div class="overflow-hidden rounded-lg shadow-md h-[400px]">
                <div
                  set:html={google_map_embed}
                  class="w-full h-full [&>iframe]:w-full [&>iframe]:h-full"
                />
              </div>
            </div>
          </div>
        )
      }
    </div>
  </section>
</Base>
